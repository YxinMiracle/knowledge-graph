{% extends "home.html" %}
{% load static %}

{% block css %}
    <style>
        .logo {
            height: 170px;
            width: 419px;
            text-align: center;
            display: inline-block;
        }

        .title {
            font-size: 30px;
            color: #ef5858;
        }

        .form_block {
            position: absolute;
            bottom: 0;
        }

        .top-left {
            position: relative;
        }

        .top-right {
            background-color: white;
            right: 0;
            float: right;
            border: 1px solid lightgray;
            font: 22pt arial;
        }

        #viz {
            width: 700px;
        }

        .answer {
            width: 50%;
            margin-left: 5%;
        {#height: 1600px;#} background-color: #eeeaea;
        }

        hr {
            border-top: 1px solid #de5e5e;
        }

        .q_div {
            width: 80%;
            margin-bottom: 40px;
        }

        .q_div p {
            font: 18px Arial, sans-serif;
            color: #333;
        }

        i {
            display: inline-block;
            vertical-align: text-bottom;
            font-family: none;
            width: 43px;
            height: 17px;
            background-image: url(https://ss1.bdstatic.com/5eN1bjq8AAUYm2zgoY3K/r/www/cache/static/protocol/https/global/img/bao_02f5d40.svg);
            background-repeat: no-repeat;
            background-size: contain;
            position: relative;
            top: 1px;
        }


        .c-icon {
            font-family: cIconfont !important;
            font-style: normal;
            -webkit-font-smoothing: antialiased;
            -moz-osx-font-smoothing: grayscale;
        }

        .c-showurl {
            color: #626675;
            font-family: Arial, sans-serif;
        }
    </style>
{% endblock css %}

{% block content %}
    <div class="top-content">
        <div class="top-left">
            <img src="{% static 'img/res_logo.png' %}" alt="" class="logo">
            <form action="" style="display: inline-block" class="form_block">
                <span class="title">PEC机器人之智能搜索</span>
                <div>
                    <input type="text" class="form-control col-sm-10"
                           style="height: 40px;width: 174%;display: inline-block" placeholder="搜索">
                    <button type="submit" class="btn btn-primary subBtn" style="margin-top: 6px">搜索</button>
                </div>
            </form>
            <div class="top-right">
                <div class="panel panel-default">
                    <header class="panel-heading">
                        此问题相关的知识点联系
                    </header>
                    <div class="panel-body">
                        <div id="viz"></div>
                    </div>
                    <header class="panel-heading">
                        此问题相关的知识点标签
                    </header>
                    <div class="panel-body">
                        <nav aria-label="...">
                            <ul class="pager">
                                <li><a href="#">C语言</a></li>
                                <li><a href="#">函数</a></li>
                            </ul>
                        </nav>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <hr>

    <div class="answer">
        <div class="container">
            <div id="content">

            </div>


            <div class="page">
                <nav aria-label="Page navigation">
                    <ul class="pagination">
                        <li>
                            <a href="#" aria-label="Previous">
                                <span aria-hidden="true">&laquo;</span>
                            </a>
                        </li>
                        <li class="active"><a href="#">1</a></li>
                        <li><a href="#">2</a></li>
                        <li><a href="#">3</a></li>
                        <li><a href="#">4</a></li>
                        <li><a href="#">5</a></li>
                        <li>
                            <a href="#" aria-label="Next">
                                <span aria-hidden="true">&raquo;</span>
                            </a>
                        </li>
                    </ul>
                </nav>
            </div>


        </div>

    </div>





{% endblock content %}

{% block js %}
    <script src="{% static 'js/graph.js' %}"></script>

    <script>
        var viz;

        function draw() {
            var config = getGraph("{{ query|safe }}")
            viz = new NeoVis.default(config);
            viz.render();
        }

        window.onload = draw();
    </script>


    <script>
        var result_list = {{ result_list|safe }};
        var html = ""
        $.each(result_list, function (index, item) {
            var question = item["highlight"]["question"];
            var ans_item = item["_source"];
            var p_text = ans_item["A"]+ans_item["B"]+ans_item["C"]+ans_item["D"]
            html += '            <div class="q_div">\n' +
                '                <a href="">\n' +
                '                    <h2>'+question+'</h2>\n' +
                '                </a>\n' +
                '                <p>'+p_text+'</p>\n' +
                '                <a target="_blank" href="#" style="text-decoration:none;position:relative;"\n' +
                '                   class="c-showurl">PEC智能机器人</a>\n' +
                '                <i class="c-icon"></i>\n' +
                '            </div>'
        });
        $('#content').html(html)
        {#console.log(result_list);#}
    </script>
{% endblock js %}
